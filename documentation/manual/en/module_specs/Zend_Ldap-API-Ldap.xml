<?xml version="1.0" encoding="UTF-8"?>
<!-- Reviewed: no -->
<sect3 id="zend.ldap.api.reference.zend-ldap">
    <title>\Zend\Ldap\Ldap</title>

    <para>
        <classname>\Zend\Ldap\Ldap</classname> is the base interface into an <acronym>LDAP</acronym>
        server. It provides connection and binding methods as well as methods to operate on the
        <acronym>LDAP</acronym> tree.
    </para>

    <table id="zend.ldap.api.reference.zend-ldap.table">
        <title>\Zend\Ldap\Ldap API</title>

        <tgroup cols="2">
            <thead>
                <row>
                    <entry>Method</entry>
                    <entry>Description</entry>
                </row>
            </thead>

            <tbody>
                <row>
                    <entry>
                        <constructorsynopsis>
                            <methodname>__construct</methodname>
                            (
                            <methodparam>
                                <type>array|\Zend\Config\config</type>
                                <parameter>$options</parameter>
                                <initializer>array()</initializer>
                            </methodparam>
                            )
                        </constructorsynopsis>
                    </entry>

                    <entry>
                        Constructor. The <varname>$options</varname> parameter is optional
                        and can be set to an array or a <classname>Zend_Config</classname> instance.
                        If no options are provided at instantiation, the connection
                        parameters must be passed to the instance using
                        <methodname>\Zend\Ldap\Ldap::setOptions()</methodname>. The allowed options are
                        specified in <link
                            linkend="zend.ldap.api.configuration.table">\Zend\Ldap\Ldap
                            Options</link>
                    </entry>
                </row>

                <row>
                    <entry>
                        <methodsynopsis>
                            <type>resource</type>
                            <methodname>getResource</methodname>
                            (<void/>)
                        </methodsynopsis>
                    </entry>

                    <entry>
                        Returns the raw <acronym>LDAP</acronym> extension (ext/ldap) resource.
                    </entry>
                </row>

                <row>
                    <entry>
                        <methodsynopsis>
                            <type>integer</type>
                            <methodname>getLastErrorCode</methodname>
                            (<void/>)
                        </methodsynopsis>
                    </entry>

                    <entry>
                        Returns the <acronym>LDAP</acronym> error number of the last
                        <acronym>LDAP</acronym> command.
                    </entry>
                </row>

                <row>
                    <entry>
                        <methodsynopsis>
                            <type>string</type>
                            <methodname>getLastError</methodname>
                            (
                            <methodparam>
                                <type>integer</type>
                                <parameter>&amp;$errorCode</parameter>
                                <initializer>null</initializer>
                            </methodparam>,
                            <methodparam>
                                <type>array</type>
                                <parameter>&amp;$errorMessages</parameter>
                                <initializer>null</initializer>
                            </methodparam>
                            )
                        </methodsynopsis>
                    </entry>

                    <entry>
                        Returns the <acronym>LDAP</acronym> error message of the last
                        <acronym>LDAP</acronym> command. The optional <varname>$errorCode</varname>
                        parameter is set to the <acronym>LDAP</acronym> error number when given. The
                        optional <varname>$errorMessages</varname> array will be filled with the raw
                        error messages when given. The various <acronym>LDAP</acronym> error
                        retrieval functions can return different things, so they are all collected
                        if <varname>$errorMessages</varname> is given.
                    </entry>
                </row>

                <row>
                    <entry>
                        <methodsynopsis>
                            <type>\Zend\Ldap\Ldap</type>
                            <methodname>setOptions</methodname>
                            (
                            <methodparam>
                                <type>array|\Zend\Config\Config</type>
                                <parameter>$options</parameter>
                            </methodparam>
                            )
                        </methodsynopsis>
                    </entry>

                    <entry>
                        Sets the <acronym>LDAP</acronym> connection and binding parameters.
                        <varname>$options</varname> can be an array or an instance of
                        <classname>Zend_Config</classname>. The allowed options are specified in
                        <link
                            linkend="zend.ldap.api.configuration.table">\Zend\Ldap\Ldap Options</link>
                    </entry>
                </row>

                <row>
                    <entry>
                        <methodsynopsis>
                            <type>array</type>
                            <methodname>getOptions</methodname>
                            (<void/>)
                        </methodsynopsis>
                    </entry>
                    <entry>Returns the current connection and binding parameters.</entry>
                </row>

                <row>
                    <entry>
                        <methodsynopsis>
                            <type>string</type>
                            <methodname>getBaseDn</methodname>
                            (<void/>)
                        </methodsynopsis>
                    </entry>

                    <entry>
                        Returns the base DN this <acronym>LDAP</acronym> connection is bound
                        to.
                    </entry>
                </row>

                <row>
                    <entry>
                        <methodsynopsis>
                            <type>string</type>
                            <methodname>getCanonicalAccountName</methodname>
                            (
                            <methodparam>
                                <type>string</type>
                                <parameter>$acctname</parameter>
                            </methodparam>,
                            <methodparam>
                                <type>integer</type>
                                <parameter>$form</parameter>
                                <initializer>0</initializer>
                            </methodparam>
                            )
                        </methodsynopsis>
                    </entry>

                    <entry>
                        Returns the canonical account name of the given account name
                        <varname>$acctname</varname>. <varname>$form</varname> specifies the <link
                            linkend="zend.ldap.using.theory-of-operation.account-name-canonicalization.table">format</link>
                        into which the account name is canonicalized. See <link
                            linkend="zend.ldap.introduction.theory-of-operations.account-name-canonicalization">Account
                            Name Canonicalization</link> for more details.
                    </entry>
                </row>

                <row>
                    <entry>
                        <methodsynopsis>
                            <type>\Zend\Ldap\Ldap</type>
                            <methodname>disconnect</methodname>
                            (<void/>)
                        </methodsynopsis>
                    </entry>

                    <entry>
                        Disconnects the <classname>\Zend\Ldap\Ldap</classname> instance from the
                        <acronym>LDAP</acronym> server.
                    </entry>
                </row>

                <row>
                    <entry>
                        <methodsynopsis>
                            <type>\Zend\Ldap\Ldap</type>
                            <methodname>connect</methodname>
                            (
                            <methodparam>
                                <type>string</type>
                                <parameter>$host</parameter>
                                <initializer>null</initializer>
                            </methodparam>,
                            <methodparam>
                                <type>integer</type>
                                <parameter>$port</parameter>
                                <initializer>null</initializer>
                            </methodparam>,
                            <methodparam>
                                <type>boolean</type>
                                <parameter>$useSsl</parameter>
                                <initializer>null</initializer>
                            </methodparam>,
                            <methodparam>
                                <type>boolean</type>
                                <parameter>$useStartTls</parameter>
                                <initializer>null</initializer>
                            </methodparam>
                            )
                        </methodsynopsis>
                    </entry>

                    <entry>
                        Connects the <classname>\Zend\Ldap\Ldap</classname> instance to the given
                        <acronym>LDAP</acronym> server. All parameters are optional and will be
                        taken from the <acronym>LDAP</acronym> connection and binding parameters
                        passed to the instance via the construtor or via
                        <methodname>\Zend\Ldap\Ldap::setOptions()</methodname> when set to
                        <constant>NULL</constant>.
                    </entry>
                </row>

                <row>
                    <entry>
                        <methodsynopsis>
                            <type>\Zend\Ldap\Ldap</type>
                            <methodname>bind</methodname>
                            (
                            <methodparam>
                                <type>string</type>
                                <parameter>$username</parameter>
                                <initializer>null</initializer>
                            </methodparam>,
                            <methodparam>
                                <type>string</type>
                                <parameter>$password</parameter>
                                <initializer>null</initializer>
                            </methodparam>
                            )
                        </methodsynopsis>
                    </entry>

                    <entry>
                        Authenticates <varname>$username</varname> with
                        <varname>$password</varname> at the <acronym>LDAP</acronym> server. If both
                        paramaters are omitted the binding will be carried out with the credentials
                        given in the connection and binding parameters. If no credentials are
                        given in the connection and binding parameters an anonymous bind
                        will be performed. Note that this requires anonymous binds to be allowed
                        on the <acronym>LDAP</acronym> server. An empty string <code>''</code> can
                        be passed as <varname>$password</varname> together with a username if, and
                        only if, <code>allowEmptyPassword</code> is set to
                        <constant>TRUE</constant> in the connection and binding parameters.
                    </entry>
                </row>

                <row>
                    <entry>
                        <methodsynopsis>
                            <type>\Zend\Ldap\Collection</type>
                            <methodname>search</methodname>
                            (
                            <methodparam>
                                <type>string|\Zend\Ldap\Filter_Abstract</type>
                                <parameter>$filter</parameter>
                            </methodparam>,
                            <methodparam>
                                <type>string|\Zend\Ldap\Dn</type>
                                <parameter>$basedn</parameter>
                                <initializer>null</initializer>
                            </methodparam>,
                            <methodparam>
                                <type>integer</type>
                                <parameter>$scope</parameter>
                                <initializer>\Zend\Ldap\Ldap::SEARCH_SCOPE_SUB</initializer>
                            </methodparam>,
                            <methodparam>
                                <tpye>array</tpye>
                                <parameter>$attributes</parameter>
                                <initializer>array()</initializer>
                            </methodparam>,
                            <methodparam>
                                <type>string</type>
                                <parameter>$sort</parameter>
                                <initializer>null</initializer>
                            </methodparam>,
                            <methodparam>
                                <type>string</type>
                                <parameter>$collectionClass</parameter>
                                <initializer>null</initializer>
                            </methodparam>,
                            <methodparam>
                                <type>int</type>
                                <parameter>$maxResults</parameter>
                                <initializer>null</initializer>
                            </methodparam>,
                            <methodparam>
                                <type>float</type>
                                <parameter>$queryTimeout</parameter>
                                <initializer>null</initializer>
                            </methodparam>
                            )
                        </methodsynopsis>
                    </entry>

                    <entry>
                        Searches the <acronym>LDAP</acronym> tree with the given
                        <varname>$filter</varname> and the given search parameters.

                        <variablelist>
                            <title>Parameter-Description</title>
                            <varlistentry>
                                <term>
                                    <synopsis>
                                        <type>string|\Zend\Ldap\Filter_Abstract</type>
                                        <parameter>$filter</parameter>
                                    </synopsis>
                                </term>
                                <listitem>
                                    The filter to be used in the search, e.g.
                                    <code>(objectClass=posixAccount)</code>.
                                </listitem>
                            </varlistentry>

                            <varlistentry>
                                <term>
                                    <synopsis>
                                        <type>string|\Zend\Ldap\Dn</type>
                                        <parameter>$basedn</parameter>
                                        <initializer>null</initializer>
                                    </synopsis>
                                </term>

                                <listitem>
                                    The search base for the search. If omitted or
                                    <constant>NULL</constant>, the <code>baseDn</code> from the
                                    connection and binding parameters is used.
                                </listitem>
                            </varlistentry>

                            <varlistentry>
                                <term>
                                    <synopsis>
                                        <type>integer</type>
                                        <parmeter>$scope</parmeter>
                                        <initializer>\Zend\Ldap\Ldap::SEARCH_SCOPE_SUB</initializer>
                                    </synopsis>
                                </term>

                                <listitem>
                                    The search scope.
                                    <itemizedlist>
                                        <listitem>
                                            <constant>\Zend\Ldap\Ldap::SEARCH_SCOPE_SUB</constant>
                                            searches the complete subtree including the
                                            <varname>$baseDn</varname> node.
                                        </listitem>
                                        <listitem>
                                            <constant>\Zend\Ldap\Ldap::SEARCH_SCOPE_ONE</constant> restricts
                                            search to one level below <varname>$baseDn</varname>.
                                        </listitem>
                                        <listitem>
                                            <constant>\Zend\Ldap\Ldap::SEARCH_SCOPE_BASE</constant> restricts
                                            search to the <varname>$baseDn</varname> itself; this can be
                                            used to efficiently retrieve a single entry by its DN.
                                        </listitem>
                                    </itemizedlist>
                                    The default value is
                                    <constant>\Zend\Ldap\Ldap::SEARCH_SCOPE_SUB</constant>.
                                </listitem>
                            </varlistentry>

                            <varlistentry>
                                <term>
                                    <synopsis>
                                        <type>array</type>
                                        <parameter>$attributes</parameter>
                                        <initializer>array()</initializer>
                                    </synopsis>
                                </term>

                                <listitem>
                                    Specifies the attributes contained in the
                                    returned entries. To include all possible attributes (ACL
                                    restrictions can disallow certain attribute to be retrieved
                                    by a given user) pass either an empty array
                                    <code>array()</code> or
                                    <code>array('*')</code> to the method. On some
                                    <acronym>LDAP</acronym> servers you can retrieve special
                                    internal attributes by passing
                                    <code>array('*', '+')</code> to the method.
                                </listitem>
                            </varlistentry>

                            <varlistentry>
                                <term>
                                    <synopsis>
                                        <type>string</type>
                                        <parameter>$sort</parameter>
                                        <initializer>null</initializer>
                                    </synopsis>
                                </term>

                                <listitem>
                                    If given the result collection will be sorted after the
                                    attribute <varname>$sort</varname>. Results can only be
                                    sorted after one single attribute as this parameter uses
                                    the ext/ldap function <methodname>ldap_sort()</methodname>.
                                </listitem>
                            </varlistentry>

                            <varlistentry>
                                <term>
                                    <synopsis>
                                        <type>string</type>
                                        <parameter>$collectionClass</parameter>
                                        <initializer>null</initializer>
                                    </synopsis>
                                </term>

                                <listitem>
                                    If given the result will be wrapped in an object of type
                                    <varname>$collectionClass</varname>. By default an object
                                    of type <classname>\Zend\Ldap\Collection</classname> will be
                                    returned. The custom class must extend
                                    <classname>\Zend\Ldap\Collection</classname> and will be
                                    passed a
                                    <classname>\Zend\Ldap\Collection\Iterator\Default</classname>
                                    on instantiation.
                                </listitem>
                            </varlistentry>

                            <varlistentry>
                                <term>
                                    <synopsis>
                                        <type>int</type>
                                        <parameter>$maxResults</parameter>
                                        <initializer>null</initializer>
                                    </synopsis>
                                </term>
                                <listitem>
                                    If given only the given number of results
                                    will be retrieved from the <acronym>LDAP</acronym>-Server.

                                    Passing a <constant>NULL</constant>-value will use
                                    <methodname>getMaxResults()</methodname> to
                                    get a value.

                                    If no value at all is given, no limit will be set.
                                    <note>
                                        This will not circumvent any limit
                                        that is implemented on the server-side!
                                    </note>
                                    <note>
                                        Not setting <varname>$maxResults</varname>
                                        might lead to an awfull lot of results.
                                    </note>
                                </listitem>
                            </varlistentry>

                            <varlistentry>
                                <term>
                                    <synopsis>
                                        <type>float</type>
                                        <parameter>$queryTimeout</parameter>
                                        <initializer>null</initializer>
                                    </synopsis>
                                </term>
                                <listitem>
                                    After the given number of seconds the query
                                    will timeout and throw a <classname>\Zend\Ldap\Exception\IOException</classname>
                                    Passing a <constant>NULL</constant>-value will use the
                                    <varname>queryTimeout</varname> set with the configuration
                                    of the instance or set via <methodname>setQueryTimeout()</methodname>
                                    If no value at all is given the method will wait indefinitely for a response.

                                </listitem>
                            </varlistentry>
                        </variablelist>
                    </entry>
                </row>

                <row>
                    <entry>
                        <methodsynopsis>
                            <type>integer</type>
                            <methodname>count</methodname>
                            (
                            <methodparam>
                                <type>string|\Zend\Ldap\Filter_Abstract</type>
                                <parameter>$filter</parameter>
                            </methodparam>,
                            <methodparam>
                                <type>string|\Zend\Ldap\Dn</type>
                                <parameter>$basedn</parameter>
                                <initializer>null</initializer>
                            </methodparam>,
                            <methodparam>
                                <type>integer</type>
                                <parameter>$scope</parameter>
                                <initializer>\Zend\Ldap\Ldap::SEARCH_SCOPE_SUB</initializer>
                            </methodparam>
                            )
                        </methodsynopsis>
                    </entry>

                    <entry>
                        Counts the elements returned by the given search parameters.
                        See <methodname>\Zend\Ldap\Ldap::search()</methodname> for a detailed description
                        of the method parameters.
                    </entry>
                </row>

                <row>
                    <entry>
                        <methodsynopsis>
                            <type>integer</type>
                            <methodname>countChildren</methodname>
                            (
                            <methodparam>
                                <type>string|\Zend\Ldap\Dn</type>
                                <parameter>$dn</parameter>
                            </methodparam>
                             )
                         </methodsynopsis>
                     </entry>

                    <entry>
                        Counts the direct descendants (children) of the entry
                        identified by the given <varname>$dn</varname>.
                    </entry>
                </row>

                <row>
                    <entry>
                        <methodsynopsis>
                            <type>boolean</type>
                            <methodname>exists</methodname>
                            (
                            <methodparam>
                                <type>string|\Zend\Ldap\Dn</type>
                                <parameter>$dn</parameter>
                            </methodparam>
                            )
                        </methodsynopsis>
                    </entry>

                    <entry>
                        Checks whether the entry identified by the given
                        <varname>$dn</varname> exists.
                    </entry>
                </row>

                <row>
                    <entry>
                        <methodsynopsis>
                            <type>array</type>
                            <methodname>searchEntries</methodname>
                            (
                            <methodparam>
                                <type>string|\Zend\Ldap\Filter\Abstract</type>
                                <parameter>$filter</parameter>
                            </methodparam>,
                            <methodparam>
                                <type>string|\Zend\Ldap\Dn</type>
                                <parameter>$basedn</parameter>
                                <initializer>null</initializer>
                            </methodparam>,
                            <methodparam>
                                <type>integer</type>
                                <parameter>$scope</parameter>
                                <initializer>\Zend\Ldap\Ldap::SEARCH_SCOPE_SUB</initializer>
                            </methodparam>,
                            <methodparam>
                                <type>array</type>
                                <parameter>$attributes</parameter>
                                <initialiter>array()</initialiter>
                            </methodparam>,
                            <methodparam>
                                <type>string</type>
                                <parameter>$sort</parameter>
                                <initializer>null</initializer>
                            </methodparam>,
                            <methodparam>
                                <type>boolean</type>
                                <parameter>$reverseSort</parameter>
                                <initializer>false</initializer>
                            </methodparam>
                            )
                        </methodsynopsis>
                    </entry>

                    <entry>
                        Performs a search operation and returns the result as a
                        <acronym>PHP</acronym> array. This is essentially the same method as
                        <methodname>\Zend\Ldap\Ldap::search()</methodname> except for the return type. See
                        <methodname>\Zend\Ldap\Ldap::search()</methodname> for a detailed description of
                        the method parameters.
                    </entry>
                </row>

                <row>
                    <entry>
                        <methodsynopsis>
                            <type>array</type>
                            <methodname>getEntry</methodname>
                            (
                            <methodparam>
                                <type>string|\Zend\Ldap\Dn</type>
                                <parameter>$dn</parameter>
                            </methodparam>,
                            <methodparam>
                                <type>array</type>
                                <parameter>$attributes</parameter>
                                <initializer>array()</initializer>
                            </methodparam>,
                            <methodparam>
                                <type>boolean</type>
                                <parameter>$throwOnNotFound</parameter>
                                <initializer>false</initializer>
                            </methodparam>
                            )
                        </methodsynopsis>
                    </entry>

                    <entry>
                        Retrieves the <acronym>LDAP</acronym> entry identified by
                        <varname>$dn</varname> with the attributes specified in
                        <varname>$attributes</varname>. If <varname>$attributes</varname> is
                        ommitted, all attributes (<methodname>array()</methodname>) are included in
                        the result. <varname>$throwOnNotFound</varname> is
                        <constant>FALSE</constant> by default, so the method will return
                        <constant>NULL</constant> if the specified entry cannot be found. If set to
                        <constant>TRUE</constant>, a <classname>\Zend\Ldap\LdapException</classname> will
                        be thrown instead.
                    </entry>
                </row>

                <row>
                    <entry>
                        <methodsynopsis>
                            <type>void</type>
                            <methodname>prepareLdapEntryArray</methodname>
                            (
                            <methodparam>
                                <type>array</type>
                                <parameter>&amp;$entry</parameter>
                            </methodparam>
                            )
                        </methodsynopsis>
                    </entry>

                    <entry>
                        Prepare an array for the use in <acronym>LDAP</acronym> modification
                        operations. This method does not need to be called by the end-user
                        as it's implicitly called on every data modification
                        method.
                    </entry>
                </row>

                <row>
                    <entry>
                        <methodsynopsis>
                            <type>\Zend\Ldap\Ldap</type>
                            <methodname>add</methodname>
                            (
                            <methodparam>
                                <type>string|\Zend\Ldap\Dn</type>
                                <parameter>$dn</parameter>
                            </methodparam>,
                            <methodparam>
                                <type>array</type>
                                <parameter>$entry</parameter>
                            </methodparam>
                            )
                        </methodsynopsis>
                    </entry>

                    <entry>
                        Adds the entry identified by <varname>$dn</varname> with its attributes
                        <varname>$entry</varname> to the <acronym>LDAP</acronym> tree. Throws a
                        <classname>\Zend\Ldap\LdapException</classname> if the entry could not be
                        added.
                    </entry>
                </row>

                <row>
                    <entry>
                        <methodsynopsis>
                            <type>\Zend\Ldap\Ldap</type>
                            <methodname>update</methodname>
                            (
                            <methodparam>
                                <type>string|\Zend\Ldap\Dn</type>
                                <parameter>$dn</parameter>
                            </methodparam>,
                            <methodparam>
                                <type>array</type>
                                <parameter>$entry</parameter>
                            </methodparam>
                            )
                        </methodsynopsis>
                    </entry>

                    <entry>
                        Updates the entry identified by <varname>$dn</varname> with its attributes
                        <varname>$entry</varname> to the <acronym>LDAP</acronym> tree. Throws a
                        <classname>\Zend\Ldap\Exception</classname> if the entry could not be
                        modified.
                    </entry>
                </row>

                <row>
                    <entry>
                        <methodsynopsis>
                            <type>\Zend\Ldap\Ldap</type>
                            <methodname>save</methodname>
                            (
                            <methodparam>
                                <type>string|\Zend\Ldap\Dn</type>
                                <parameter>$dn</parameter>
                            </methodparam>,
                            <methodparam>
                                <type>array</type>
                                <parameter>$entry</parameter>
                            </methodparam>
                            )
                        </methodsynopsis>
                    </entry>

                    <entry>
                        Saves the entry identified by <varname>$dn</varname> with its attributes
                        <varname>$entry</varname> to the <acronym>LDAP</acronym> tree. Throws a
                        <classname>\Zend\Ldap\LdapException</classname> if the entry could not be saved.
                        This method decides by querying the <acronym>LDAP</acronym> tree if the
                        entry will be added or updated.
                    </entry>
                </row>

                <row>
                    <entry>
                        <methodsynopsis>
                            <type>\Zend\Ldap\Ldap</type>
                            <methodname>delete</methodname>
                            (
                            <methodparam>
                                <type>string|\Zend\Ldap\Dn</type>
                                <parameter>$dn</parameter>
                            </methodparam>,
                            <methodparam>
                                <type>boolean</type>
                                <parameter>$recursively</parameter>
                                <initializer><constant>FALSE</constant></initializer>
                            </methodparam>
                            )
                        </methodsynopsis>
                    </entry>

                    <entry>
                        Deletes the entry identified by <varname>$dn</varname> from the
                        <acronym>LDAP</acronym> tree. Throws a
                        <classname>\Zend\Ldap\LdapException</classname> if the entry could not be
                        deleted. <varname>$recursively</varname> is <constant>FALSE</constant> by
                        default. If set to <constant>TRUE</constant> the deletion will be carried
                        out recursively and will effectively delete a complete subtree. Deletion
                        will fail if <varname>$recursively</varname> is <constant>FALSE</constant>
                        and the entry <varname>$dn</varname> is not a leaf entry.
                    </entry>
                </row>

                <row>
                    <entry>
                        <methodsynopsis>
                            <type>\Zend\Ldap\Ldap</type>
                            <methodname>moveToSubtree</methodname>
                            (
                            <methodparam>
                                <type>string|\Zend\Ldap\Dn</type>
                                <parameter>$from</parameter>
                            </methodparam>,
                            <methodparam>
                                <type>string|\Zend\Ldap\Dn</type>
                                <parameter>$to</parameter>
                            </methodparam>,
                            <methodparam>
                                <type>boolean</type>
                                <parameter>$recursively</parameter>
                                <initializer><constant>FALSE</constant></initializer>
                            </methodparam>,
                            <methodparam>
                                <type>boolean</type>
                                <parameter>$alwaysEmulate</parameter>
                                <initializer><constant>FALSE</constant></initializer>
                            </methodparam>
                            )
                        </methodsynopsis>
                    </entry>

                    <entry>
                        Moves the entry identified by <varname>$from</varname> to a location below
                        <varname>$to</varname> keeping its <acronym>RDN</acronym> unchanged.
                        <varname>$recursively</varname> specifies if the operation will be
                        carried out recursively (<constant>FALSE</constant> by default) so that the
                        entry <varname>$from</varname> and all its descendants will be moved.
                        Moving will fail if <varname>$recursively</varname> is
                        <constant>FALSE</constant> and the entry <varname>$from</varname> is not a
                        leaf entry. <varname>$alwaysEmulate</varname> controls whether the ext/ldap
                        function <methodname>ldap_rename()</methodname> should be used if available.
                        This can only work for leaf entries and for servers and for ext/ldap
                        supporting this function. Set to <constant>TRUE</constant> to always use an
                        emulated rename operation.

                        <note>
                            All move-operations are carried out by copying and then deleting the
                            corresponding entries in the <acronym>LDAP</acronym> tree. These
                            operations are <emphasis role="strong">not</emphasis> <emphasis>atomic</emphasis> so that failures
                            during the operation will result in an
                            <emphasis>inconsistent</emphasis> state on the
                            <acronym>LDAP</acronym> server. The same is true for all recursive
                            operations. They also are by no means atomic. Please keep this in
                            mind.
                        </note>
                    </entry>
                </row>

                <row>
                    <entry>
                        <methodsynopsis>
                            <type>\Zend\Ldap\Ldap</type>
                            <methodname>move</methodname>
                            (
                            <methodparam>
                                <type>string|\Zend\Ldap\Dn</type>
                                <parameter>$from</parameter>
                            </methodparam>,
                            <methodparam>
                                <type>string|\Zend\Ldap\Dn</type>
                                <parameter>$to</parameter>
                            </methodparam>,
                            <methodparam>
                                <type>boolean</type>
                                <parameter>$recursively</parameter>
                                <initializer><constant>FALSE</constant></initializer>
                            </methodparam>,
                            <methodparam>
                                <type>boolean</type>
                                <parameter>$alwaysEmulate</parameter>
                                <initializer><constant>FALSE</constant></initializer>
                            </methodparam>
                            )
                        </methodsynopsis>
                    </entry>

                    <entry>
                        This is an alias for <methodname>\Zend\Ldap\Ldap::rename()</methodname>.
                    </entry>
                </row>

                <row>
                    <entry>
                        <methodsynopsis>
                            <type>\Zend\Ldap\Ldap</type>
                            <methodname>rename</methodname>
                            (
                            <methodparam>
                                <type>string|\Zend\Ldap\Dn</type>
                                <parameter>$from</parameter>
                            </methodparam>,
                            <methodparam>
                                <type>string|\Zend\Ldap\Dn</type>
                                <parameter>$to</parameter>
                            </methodparam>,
                            <methodparam>
                                <type>boolean</type>
                                <parameter>$recursively</parameter>
                                <initializer><constant>FALSE</constant></initializer>
                            </methodparam>,
                            <methodparam>
                                <type>boolean</type>
                                <parameter>$alwaysEmulate</parameter>
                                <initializer><constant>FALSE</constant></initializer>
                            </methodparam>
                            )
                        </methodsynopsis>
                    </entry>

                    <entry>
                        Renames the entry identified by <varname>$from</varname> to
                        <varname>$to</varname>. <varname>$recursively</varname> specifies if the
                        operation will be carried out recursively (<constant>FALSE</constant> by
                        default) so that the entry <varname>$from</varname> and all its
                        descendants will be moved. Moving will fail if
                        <varname>$recursively</varname> is <constant>FALSE</constant> and the entry
                        <varname>$from</varname> is not a leaf entry.
                        <varname>$alwaysEmulate</varname> controls whether the ext/ldap function
                        <methodname>ldap_rename()</methodname> should be used if available. This can
                        only work for leaf entries and for servers and for ext/ldap supporting this
                        function. Set to <constant>TRUE</constant> to always use an emulated rename
                        operation.
                    </entry>
                </row>

                <row>
                    <entry>
                        <methodsynopsis>
                            <type>\Zend\Ldap\Ldap</type>
                            <methodname>copyToSubtree</methodname>
                            (
                            <methodparam>
                                <type>string|\Zend\Ldap\Dn</type>
                                <parameter>$from</parameter>
                            </methodparam>,
                            <methodparam>
                                <type>string|\Zend\Ldap\Dn</type>
                                <parameter>$to</parameter>
                            </methodparam>,
                            <methodparam>
                                <type>boolean</type>
                                <parameter>$recursively</parameter>
                                <initializer><constant>FALSE</constant></initializer>
                            </methodparam>
                            )
                        </methodsynopsis>
                    </entry>

                    <entry>
                        Copies the entry identified by <varname>$from</varname> to a location below
                        <varname>$to</varname> keeping its <acronym>RDN</acronym> unchanged.
                        <varname>$recursively</varname> specifies if the operation will be
                        carried out recursively (<constant>FALSE</constant> by default) so that the
                        entry <varname>$from</varname> and all its descendants will be copied.
                        Copying will fail if <varname>$recursively</varname> is
                        <constant>FALSE</constant> and the entry <varname>$from</varname> is not a
                        leaf entry.
                    </entry>
                </row>

                <row>
                    <entry>
                        <methodsynopsis>
                            <type>\Zend\Ldap\Ldap</type>
                            <methodname>copy</methodname>
                            (
                            <methodparam>
                                <type>string|\Zend\Ldap\Dn</type>
                                <parameter>$from</parameter>
                            </methodparam>,
                            <methodparam>
                                <type>string|\Zend\Ldap\Dn</type>
                                <parameter>$to</parameter>
                            </methodparam>,
                            <methodparam>
                                <type>boolean</type>
                                <parameter>$recursively</parameter>
                                <initializer><constant>FALSE</constant></initializer>
                            </methodparam>
                            )
                        </methodsynopsis>
                    </entry>

                    <entry>
                        Copies the entry identified by <varname>$from</varname> to
                        <varname>$to</varname>. <varname>$recursively</varname> specifies if the
                        operation will be carried out recursively (<constant>FALSE</constant> by
                        default) so that the entry <varname>$from</varname> and all its
                        descendants will be copied. Copying will fail if
                        <varname>$recursively</varname> is <constant>FALSE</constant> and the entry
                        <varname>$from</varname> is not a leaf entry.
                    </entry>
                </row>

                <row>
                    <entry>
                        <methodsynopsis>
                            <type>\Zend\Ldap\Node</type>
                            <methodname>getNode</methodname>
                            (
                            <methodparam>
                                <type>string|\Zend\Ldap\Dn</type>
                                <parameter>$dn</parameter>
                            </methodparam>
                            )
                        </methodsynopsis>
                    </entry>

                    <entry>
                        Returns the entry <varname>$dn</varname> wrapped in a
                        <classname>\Zend\Ldap\Node</classname>.
                    </entry>
                </row>

                <row>
                    <entry>
                        <methodsynopsis>
                            <type>\Zend\Ldap\Node</type>
                            <methodname>getBaseNode</methodname>
                            (
                            <methodparam><void/></methodparam>
                            )
                        </methodsynopsis>
                    </entry>

                    <entry>
                        Returns the entry for the base DN <varname>$baseDn</varname>
                        wrapped in a <classname>\Zend\Ldap\Ldap_Node</classname>.
                    </entry>
                </row>

                <row>
                    <entry>
                        <methodsynopsis>
                            <type>\Zend\Ldap\Node\RootDse</type>
                            <methodname>getRootDse</methodname>
                            (
                            <methodparam><void/></methodparam>
                            )
                        </methodsynopsis>
                    </entry>
                    <entry>Returns the RootDSE for the current server.</entry>
                </row>

                <row>
                    <entry>
                        <methodsynopsis>
                            <type>\Zend\Ldap\Node\Schema</type>
                            <methodname>getSchema</methodname>
                            (
                            <methodparam><void/></methodparam>
                            )
                        </methodsynopsis></entry>
                    <entry>
                        Returns the <acronym>LDAP</acronym> schema for the current server.
                    </entry>
                </row>
            </tbody>
            <tbody>
                <row>
                    <entry>
                        <methodsynopsis>
                            <type>string</type>
                            <methodname>filterEscape</methodname>
                            (
                            <methodparam>
                                <type>string</type>
                                <parameter>$str</parameter>
                            </methodparam>
                        </methodsynopsis>
                    </entry>

                    <entry>
                        Escapes a value to be used in a <acronym>LDAP</acronym> filter according to
                        <acronym>RFC</acronym> 2254. This method is <emphasis>deprecated</emphasis>,
                        please use <methodname>\Zend\Ldap\Filter_Abstract::escapeValue()</methodname>
                        instead.
                    </entry>
                </row>

                <row>
                    <entry>
                        <methodsynopsis>
                            <type>boolean</type>
                            <methodname>explodeDn</methodname>
                            (
                            <methodparam>
                                <parameter>$dn</parameter>
                            </methodparam>,
                            <methodparam>
                                <type>array</type>
                                <parameter>&amp;$keys</parameter>
                                <initializer>null</initializer>
                            </methodparam>,
                            <methodparam>
                                <type>array</type>
                                <parameter>&amp;$vals</parameter>
                                <initializer>null</initializer>
                            </methodparam>
                            )
                        </methodsynopsis>
                    </entry>

                    <entry>
                        Checks if a given DN <varname>$dn</varname> is malformed. If
                        <varname>$keys</varname> or <varname>$keys</varname> and
                        <varname>$vals</varname> are given, these arrays will be filled with the
                        appropriate DN keys and values. This method is
                        <emphasis>deprecated</emphasis>, please use
                        <methodname>\Zend\Ldap\Dn::checkDn()</methodname> instead.
                    </entry>
                </row>
            </tbody>
        </tgroup>
    </table>

    <sect4 id="zend.ldap.api.reference.zend-ldap.zend-ldap-collection">
        <title>\Zend\Ldap\Collection</title>

        <para>
            <classname>\Zend\Ldap\Collection</classname> implements <classname>\Iterator</classname> to
            allow for item traversal using <methodname>foreach()</methodname> and
            <classname>\Countable</classname> to be able to respond to <methodname>count()</methodname>. With
            its protected <methodname>_createEntry()</methodname> method it provides a simple
            extension point for developers needing custom result objects.
        </para>

        <table id="zend.ldap.api.reference.zend-ldap.zend-ldap-collection.table">
            <title>\Zend\Ldap\Collection API</title>

            <tgroup cols="2">
                <thead>
                    <row>
                        <entry>Method</entry>
                        <entry>Description</entry>
                    </row>
                </thead>

                <tbody>
                    <row>
                        <entry>
                            <constructorsynopsis>
                                <methodname>__construct</methodname>
                                (
                                <methodparam>
                                    <type>\Zend\Ldap\Collection\Iterator\Interface</type>
                                    <parameter>$iterator</parameter>
                                </methodparam>
                                )
                            </constructorsynopsis>
                        </entry>

                        <entry>
                            Constructor. The constrcutor must be provided by a
                            <classname>\Zend\Ldap\Collection\Iterator\Interface</classname> which
                            does the real result iteration.
                            <classname>\Zend\Ldap\Collection\Iterator\Default</classname> is the
                            default implementation for iterating ext/ldap results.
                        </entry>
                    </row>

                    <row>
                        <entry>
                            <methodsynopsis>
                                <type>boolean</type>
                                <methodname>close</methodname>
                                (
                                <methodparam><void/></methodparam>
                                )
                            </methodsynopsis>
                        </entry>

                        <entry>
                            Closes the internal iterator. This is also called in the destructor.
                        </entry>
                    </row>

                    <row>
                        <entry>
                            <methodsynopsis>
                                <type>array</type>
                                <methodname>toArray</methodname>
                                (
                                <methodparam><void/></methodparam>
                                )
                            </methodsynopsis>
                        </entry>
                        <entry>Returns all entries as an array.</entry>
                    </row>

                    <row>
                        <entry>
                            <medthodsynopsis>
                                    <type>array</type>
                                    <methodname>getFirst</methodname>
                                    (
                                    <methodparam><void/></methodparam>
                                    )
                            </methodsynopsis>
                        </entry>

                        <entry>
                            Returns the first entry in the collection or
                            <constant>NULL</constant> if the collection is empty.
                        </entry>
                    </row>
                </tbody>
            </tgroup>
        </table>
    </sect4>
</sect3>
